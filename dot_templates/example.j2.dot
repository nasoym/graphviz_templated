digraph G {
  layout="dot";
  rankdir=TB;
  concentrate=true;
  compound=true;
  newrank=true;
  pad="0.2,0.2";
  splines=curved;
  /* splines=polyline; */
  forcelabels=true;
  outputorder="edgesfirst";

  fontname="helvetica";
  node[shape="rect",fontname="helvetica"];
  edge[fontname="helvetica"];

  {% for node in nodes%} 
    {{node.id}}[
    {% if node.name is defined %}
      label="{{node.name[0:5]}}"
    {% else %}
      label="{{node.id}}"
    {% endif %}
    {% if node.style is defined %}
      {% if styles.nodes[node.style].raw is defined %}
        {{styles.nodes[node.style].raw}}
      {% else %}
        style="{{styles.nodes[node.style].style}}"
      {% endif %}
    {% else %}
      style="dashed"
    {% endif %}
    {% if node.bgcolor is defined %}
      fillcolor={{node.bgcolor}}
      style=filled
    {% endif %}
    ];
  {% endfor %}

  {% for edge in edges%} 
    {{edge.nodes.0}} -> {{edge.nodes.1}}[
    {% if edge.style is defined %}
      {% if styles.edges[edge.style].raw is defined %}
        {{styles.edges[edge.style].raw}}
      {% endif %}
    {% endif %}
    ];
  {% endfor %}

}
